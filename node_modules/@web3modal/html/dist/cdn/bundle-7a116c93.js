const ye=Symbol(),ae=Object.getPrototypeOf,ee=new WeakMap,we=e=>e&&(ee.has(e)?ee.get(e):ae(e)===Object.prototype||ae(e)===Array.prototype),Ie=e=>we(e)&&e[ye]||null,ie=(e,t=!0)=>{ee.set(e,t)},Q=e=>typeof e=="object"&&e!==null,R=new WeakMap,F=new WeakSet,Ee=(e=Object.is,t=(r,E)=>new Proxy(r,E),s=r=>Q(r)&&!F.has(r)&&(Array.isArray(r)||!(Symbol.iterator in r))&&!(r instanceof WeakMap)&&!(r instanceof WeakSet)&&!(r instanceof Error)&&!(r instanceof Number)&&!(r instanceof Date)&&!(r instanceof String)&&!(r instanceof RegExp)&&!(r instanceof ArrayBuffer),n=r=>r.configurable&&r.enumerable&&r.writable,l=r=>{switch(r.status){case"fulfilled":return r.value;case"rejected":throw r.reason;default:throw r}},u=new WeakMap,f=(r,E,S=l)=>{const C=u.get(r);if(C?.[0]===E)return C[1];const L=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r));return ie(L,!0),u.set(r,[E,L]),Reflect.ownKeys(r).forEach($=>{if(Object.getOwnPropertyDescriptor(L,$))return;const M=Reflect.get(r,$),_={value:M,enumerable:!0,configurable:!0};if(F.has(M))ie(M,!1);else if(M instanceof Promise)delete _.value,_.get=()=>S(M);else if(R.has(M)){const[v,G]=R.get(M);_.value=f(v,G(),S)}Object.defineProperty(L,$,_)}),Object.preventExtensions(L)},p=new WeakMap,b=[1,1],I=r=>{if(!Q(r))throw new Error("object required");const E=p.get(r);if(E)return E;let S=b[0];const C=new Set,L=(i,a=++b[0])=>{S!==a&&(S=a,C.forEach(c=>c(i,a)))};let $=b[1];const M=(i=++b[1])=>($!==i&&!C.size&&($=i,v.forEach(([a])=>{const c=a[1](i);c>S&&(S=c)})),S),_=i=>(a,c)=>{const o=[...a];o[1]=[i,...o[1]],L(o,c)},v=new Map,G=(i,a)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&v.has(i))throw new Error("prop listener already exists");if(C.size){const c=a[3](_(i));v.set(i,[a,c])}else v.set(i,[a])},re=i=>{var a;const c=v.get(i);c&&(v.delete(i),(a=c[1])==null||a.call(c))},be=i=>(C.add(i),C.size===1&&v.forEach(([c,o],W)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&o)throw new Error("remove already exists");const N=c[3](_(W));v.set(W,[c,N])}),()=>{C.delete(i),C.size===0&&v.forEach(([c,o],W)=>{o&&(o(),v.set(W,[c]))})}),q=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r)),oe=(i,a,c,o,W)=>{if(i&&(e(a,o)||p.has(o)&&e(a,p.get(o))))return;re(c),Q(o)&&(o=Ie(o)||o);let N=o;if(o instanceof Promise)o.then(O=>{o.status="fulfilled",o.value=O,L(["resolve",[c],O])}).catch(O=>{o.status="rejected",o.reason=O,L(["reject",[c],O])});else{!R.has(o)&&s(o)&&(N=I(o));const O=!F.has(N)&&R.get(N);O&&G(c,O)}W(N),L(["set",[c],o,a])},z=t(q,{deleteProperty(i,a){const c=Reflect.get(i,a);re(a);const o=Reflect.deleteProperty(i,a);return o&&L(["delete",[a],c]),o},set(i,a,c,o){const W=Reflect.has(i,a),N=Reflect.get(i,a,o);return oe(W,N,a,c,O=>{Reflect.set(i,a,O,o)}),!0},defineProperty(i,a,c){if(n(c)){const o=Reflect.getOwnPropertyDescriptor(i,a);if(!o||n(o))return oe(!!o&&"value"in o,o?.value,a,c.value,W=>{Reflect.defineProperty(i,a,{...c,value:W})}),!0}return Reflect.defineProperty(i,a,c)}});p.set(r,z);const ve=[q,M,f,be];return R.set(z,ve),Reflect.ownKeys(r).forEach(i=>{const a=Object.getOwnPropertyDescriptor(r,i);"value"in a&&(z[i]=r[i],delete a.value,delete a.writable),Object.defineProperty(q,i,a)}),z})=>[I,R,F,e,t,s,n,l,u,f,p,b],[Ce]=Ee();function P(e={}){return Ce(e)}function D(e,t,s){const n=R.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!n&&console.warn("Please use proxy object");let l;const u=[],f=n[3];let p=!1;const I=f(r=>{if(u.push(r),s){t(u.splice(0));return}l||(l=Promise.resolve().then(()=>{l=void 0,p&&t(u.splice(0))}))});return p=!0,()=>{p=!1,I()}}function Le(e,t){const s=R.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!s&&console.warn("Please use proxy object");const[n,l,u]=s;return u(n,l(),t)}const m=P({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),B={state:m,subscribe(e){return D(m,()=>e(m))},push(e,t){e!==m.view&&(m.view=e,t&&(m.data=t),m.history.push(e))},reset(e){m.view=e,m.history=[e]},replace(e){m.history.length>1&&(m.history[m.history.length-1]=e,m.view=e)},goBack(){if(m.history.length>1){m.history.pop();const[e]=m.history.slice(-1);m.view=e}},setData(e){m.data=e}},g={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return g.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const e=navigator.userAgent.toLowerCase();return g.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},formatNativeUrl(e,t,s){if(g.isHttpUrl(e))return this.formatUniversalUrl(e,t,s);let n=e;n.includes("://")||(n=e.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,s);const l=encodeURIComponent(t);return`${n}wc?uri=${l}`},formatUniversalUrl(e,t,s){if(!g.isHttpUrl(e))return this.formatNativeUrl(e,t,s);let n=e;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,s);const l=encodeURIComponent(t);return`${n}wc?uri=${l}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(g.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(g.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(g.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setWeb3ModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(g.W3M_VERSION,"2.7.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=(e=B.state.data)==null?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;const t=(e=B.state.data)==null?void 0:e.SwitchNetwork;if(!t)throw new Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag(){return typeof location<"u"?new URLSearchParams(location.search).has(g.W3M_PREFER_INJECTED_URL_FLAG):!1}};let X;const j={ethereumClient:void 0,setEthereumClient(e){X=e},client(){if(X)return X;throw new Error("ClientCtrl has no client set")}},We=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),h=P({enabled:We,userSessionId:"",events:[],connectedWalletId:void 0}),he={state:h,subscribe(e){return D(h.events,()=>e(Le(h.events[h.events.length-1])))},initialize(){h.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(h.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){h.connectedWalletId=e},click(e){if(h.enabled){const t={type:"CLICK",name:e.name,userSessionId:h.userSessionId,timestamp:Date.now(),data:e};h.events.push(t)}},track(e){if(h.enabled){const t={type:"TRACK",name:e.name,userSessionId:h.userSessionId,timestamp:Date.now(),data:e};h.events.push(t)}},view(e){if(h.enabled){const t={type:"VIEW",name:e.name,userSessionId:h.userSessionId,timestamp:Date.now(),data:e};h.events.push(t)}}},y=P({selectedChain:void 0,chains:void 0,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1}),A={state:y,subscribe(e){return D(y,()=>e(y))},setChains(e){y.chains=e},getSelectedChain(){const e=j.client().getNetwork().chain;return e&&(y.selectedChain=e),y.selectedChain},setSelectedChain(e){y.selectedChain=e},setIsCustomDesktop(e){y.isCustomDesktop=e},setIsCustomMobile(e){y.isCustomMobile=e},setIsDataLoaded(e){y.isDataLoaded=e},setIsUiLoaded(e){y.isUiLoaded=e},setIsPreferInjected(e){y.isPreferInjected=e}},H=P({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),U={state:H,subscribe(e){return D(H,()=>e(H))},setConfig(e){var t,s;he.initialize(),A.setIsCustomMobile(Boolean((t=e.mobileWallets)==null?void 0:t.length)),A.setIsCustomDesktop(Boolean((s=e.desktopWallets)==null?void 0:s.length)),A.setChains(j.client().chains),A.setIsPreferInjected(j.client().isInjectedProviderInstalled()&&g.isPreferInjectedFlag()),e.defaultChain&&A.setSelectedChain(e.defaultChain),g.setWeb3ModalVersionInStorage(),Object.assign(H,e)}},Oe="eip155",je="https://rpc.walletconnect.com",Ae={async getIdentity(e,t){const{projectId:s}=U.state,n=`${Oe}:${t}`,l=`${je}/v1/identity/${e}?chainId=${n}&projectId=${s}`;return(await fetch(l)).json()}},d=P({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),Pe={state:d,subscribe(e){return D(d,()=>e(d))},getAccount(){const e=j.client().getAccount();d.address=e.address,d.isConnected=e.isConnected},async fetchProfile(e,t){var s;try{d.profileLoading=!0,d.profileName=null,d.profileAvatar=null;const n=t??d.address,l=1,u=(s=A.state.chains)==null?void 0:s.find(f=>f.id===l);if(n&&u){try{const f=await Ae.getIdentity(n,l);d.profileName=f.name,d.profileAvatar=f.avatar}catch{const p=await j.client().fetchEnsName({address:n,chainId:l});if(d.profileName=p,p){const b=await j.client().fetchEnsAvatar({name:p,chainId:l});d.profileAvatar=b}}d.profileAvatar&&await e(d.profileAvatar)}}finally{d.profileLoading=!1}},async fetchBalance(e){try{const{chain:t}=j.client().getNetwork(),{tokenContracts:s}=U.state;let n;t&&s&&(n=s[t.id]),d.balanceLoading=!0;const l=e??d.address;if(l){const u=await j.client().fetchBalance({address:l,token:n});d.balance={amount:u.formatted,symbol:u.symbol}}}finally{d.balanceLoading=!1}},setAddress(e){d.address=e},setIsConnected(e){d.isConnected=e},resetBalance(){d.balance=void 0},resetAccount(){d.address=void 0,d.isConnected=!1,d.profileName=void 0,d.profileAvatar=void 0,d.balance=void 0}};var Me=Object.defineProperty,le=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,ce=(e,t,s)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Se=(e,t)=>{for(var s in t||(t={}))Ue.call(t,s)&&ce(e,s,t[s]);if(le)for(var s of le(t))De.call(t,s)&&ce(e,s,t[s]);return e};const te="https://explorer-api.walletconnect.com",se="w3m",ne="js-2.7.1";async function J(e,t){const s=Se({sdkType:se,sdkVersion:ne},t),n=new URL(e,te);return n.searchParams.append("projectId",U.state.projectId),Object.entries(s).forEach(([l,u])=>{u&&n.searchParams.append(l,String(u))}),(await fetch(n)).json()}const k={async getDesktopListings(e){return J("/w3m/v1/getDesktopListings",e)},async getMobileListings(e){return J("/w3m/v1/getMobileListings",e)},async getInjectedListings(e){return J("/w3m/v1/getInjectedListings",e)},async getAllListings(e){return J("/w3m/v1/getAllListings",e)},getWalletImageUrl(e){return`${te}/w3m/v1/getWalletImage/${e}?projectId=${U.state.projectId}&sdkType=${se}&sdkVersion=${ne}`},getAssetImageUrl(e){return`${te}/w3m/v1/getAssetImage/${e}?projectId=${U.state.projectId}&sdkType=${se}&sdkVersion=${ne}`}};var Ne=Object.defineProperty,de=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,ue=(e,t,s)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_e=(e,t)=>{for(var s in t||(t={}))ke.call(t,s)&&ue(e,s,t[s]);if(de)for(var s of de(t))Re.call(t,s)&&ue(e,s,t[s]);return e};const fe=g.isMobile(),w=P({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),ze={state:w,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=U.state;if(e==="NONE"||t==="ALL"&&!e)return w.recomendedWallets;if(g.isArray(e)){const s={recommendedIds:e.join(",")},{listings:n}=await k.getAllListings(s),l=Object.values(n);l.sort((u,f)=>{const p=e.indexOf(u.id),b=e.indexOf(f.id);return p-b}),w.recomendedWallets=l}else{const s=g.isArray(t),n={page:1,entries:g.RECOMMENDED_WALLET_AMOUNT,version:2,excludedIds:s?t.join(","):void 0},{listings:l}=fe?await k.getMobileListings(n):await k.getDesktopListings(n);w.recomendedWallets=Object.values(l)}return w.recomendedWallets},async getWallets(e){const t=_e({},e),{explorerRecommendedWalletIds:s,explorerExcludedWalletIds:n}=U.state,{recomendedWallets:l}=w;if(n==="ALL")return w.wallets;l.length?t.excludedIds=l.map(E=>E.id).join(","):g.isArray(s)&&(t.excludedIds=s.join(",")),g.isArray(n)&&(t.excludedIds=[t.excludedIds,n].filter(Boolean).join(","));const{page:u,search:f}=e,{listings:p,total:b}=fe?await k.getMobileListings(t):await k.getDesktopListings(t),I=Object.values(p),r=f?"search":"wallets";return w[r]={listings:[...w[r].listings,...I],total:b,page:u??1},{listings:I,total:b}},async getInjectedWallets(){const{listings:e}=await k.getInjectedListings({}),t=Object.values(e);return w.injectedWallets=t,w.injectedWallets},getWalletImageUrl(e){return k.getWalletImageUrl(e)},getAssetImageUrl(e){return k.getAssetImageUrl(e)},resetSearch(){w.search={listings:[],total:0,page:1}}},V=P({pairingEnabled:!1,pairingUri:"",pairingError:!1}),Y={state:V,subscribe(e){return D(V,()=>e(V))},setPairingUri(e){V.pairingUri=e},setPairingError(e){V.pairingError=e},setPairingEnabled(e){V.pairingEnabled=e}},x=P({open:!1}),Z={state:x,subscribe(e){return D(x,()=>e(x))},async open(e){return new Promise(t=>{const{isUiLoaded:s,isDataLoaded:n,isPreferInjected:l,selectedChain:u}=A.state,{isConnected:f}=Pe.state,{enableNetworkView:p}=U.state;if(Y.setPairingEnabled(!0),f||g.removeWalletConnectDeepLink(),e!=null&&e.route)B.reset(e.route);else if(f)B.reset("Account");else if(p)B.reset("SelectNetwork");else if(l){j.client().connectConnector("injected",u?.id).catch(I=>console.error(I)),t();return}else B.reset("ConnectWallet");const{pairingUri:b}=Y.state;if(s&&n&&(b||f))x.open=!0,t();else{const I=setInterval(()=>{const r=A.state,E=Y.state;r.isUiLoaded&&r.isDataLoaded&&(E.pairingUri||f)&&(clearInterval(I),x.open=!0,t())},200)}})},close(){x.open=!1}};var Te=Object.defineProperty,pe=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,me=(e,t,s)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,xe=(e,t)=>{for(var s in t||(t={}))$e.call(t,s)&&me(e,s,t[s]);if(pe)for(var s of pe(t))Ve.call(t,s)&&me(e,s,t[s]);return e};function Be(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const K=P({themeMode:Be()?"dark":"light"}),ge={state:K,subscribe(e){return D(K,()=>e(K))},setThemeConfig(e){const{themeMode:t,themeVariables:s}=e;t&&(K.themeMode=t),s&&(K.themeVariables=xe({},s))}},T=P({open:!1,message:"",variant:"success"}),Fe={state:T,subscribe(e){return D(T,()=>e(T))},openToast(e,t){T.open=!0,T.message=e,T.variant=t},closeToast(){T.open=!1}};class He{constructor(t,s){this.openModal=Z.open,this.closeModal=Z.close,this.subscribeModal=Z.subscribe,this.setTheme=ge.setThemeConfig,this.setDefaultChain=A.setSelectedChain,this.subscribeEvents=he.subscribe,ge.setThemeConfig(t),j.setEthereumClient(s),U.setConfig(t),this.initUi()}async initUi(){if(typeof window<"u"){await import("./index-fec845d6.js");const t=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",t),A.setIsUiLoaded(!0)}}}export{he as H,Pe as K,Y as U,He as W,A as f,j as g,ze as n,g as o,ge as p,Z as r,Fe as u,U as v,B as y};
//# sourceMappingURL=bundle-7a116c93.js.map
